---

name: client-registrar
description: |
  A job that uses a uaa admin to register firehose nozzle credentials.
  This would be an errand except PCF only offers *post-install* errands and this
  work would need to happen *pre-install*.

packages:
- common
- splunk-nozzle

templates:
  ctl.sh.erb: bin/ctl.sh

properties:
  cf_splunk:
    skip_ssl_validation:
      description: Skip ssl validation (for self signed certs, useful in dev environments)
      default: false

    uaa_endpoint:
      description: The value of key "token_endpoint" from /v2/info

    admin_uaa_username:
      description: Uaa admin client
    admin_uaa_secret:
      description: Secret assocated with admin_uaa_username

    firehose_uaa_username:
      description: uaa client to create having doppler.firehose scope
    firehose_uaa_secret:
      description: Secret assocated with firehose_uaa_username
